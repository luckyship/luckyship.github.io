---
layout: post
title: go 环境管理
tags: [go]
comments: true
date: 2025-07-30 11:28:28
---

Go 有多种版本管理工具可以帮助您在不同版本之间切换。以下是一些常用的 Go 版本管理工具：

<!-- more -->

## 1. goenv

`goenv` 是一个类似于 `rbenv` 的 Go 版本管理工具，可以方便地在不同 Go 版本之间切换。

安装方式（在 Linux/macOS 上）：

```bash
# 克隆 goenv
git clone https://github.com/syndbg/goenv.git ~/.goenv

# 添加到 ~/.bashrc 或 ~/.zshrc
echo 'export GOENV_ROOT="$HOME/.goenv"' >> ~/.bashrc
echo 'export PATH="$GOENV_ROOT/bin:$PATH"' >> ~/.bashrc
echo 'eval "$(goenv init -)"' >> ~/.bashrc

# 重新加载配置
source ~/.bashrc

# 安装指定版本的 Go
goenv install 1.18.10
goenv install 1.21.5

# 设置全局版本
goenv global 1.21.5

# 为特定项目设置版本
cd /path/to/project
goenv local 1.18.10
```

## 2. gvm (Go Version Manager)

`gvm` 是另一个流行的 Go 版本管理工具。

安装方式：

```bash
# 安装 gvm
bash < <(curl -s -S -L https://raw.githubusercontent.com/moovweb/gvm/master/binscripts/gvm-installer)

# 添加到 shell 配置
echo '[[ -s "$HOME/.gvm/scripts/gvm" ]] && source "$HOME/.gvm/scripts/gvm"' >> ~/.bashrc

# 重新加载配置
source ~/.bashrc

# 安装和使用特定版本
gvm install go1.18.10
gvm install go1.21.5
gvm use go1.18.10
```

## 3. 使用官方方式管理多个 Go 版本

您也可以手动安装多个版本的 Go：

```bash
# 下载并解压不同版本到不同目录
wget https://go.dev/dl/go1.18.10.linux-amd64.tar.gz
wget https://go.dev/dl/go1.21.5.linux-amd64.tar.gz

sudo tar -C /usr/local -xzf go1.18.10.linux-amd64.tar.gz
sudo tar -C /usr/local -xzf go1.21.5.linux-amd64.tar.gz

# 创建符号链接来切换版本
sudo ln -s /usr/local/go1.18.10 /usr/local/go-current
export PATH="/usr/local/go-current/bin:$PATH"

# 或者直接使用完整路径
/usr/local/go1.18.10/bin/go version
/usr/local/go1.21.5/bin/go version
```

## 4. 使用 Docker

如果您不想在本地安装多个 Go 版本，也可以使用 Docker 容器来运行不同版本的 Go：

```bash
# 使用 Go 1.18 运行项目
docker run -it -v $(pwd):/app -w /app golang:1.18 go run main.go

# 使用 Go 1.21 运行项目
docker run -it -v $(pwd):/app -w /app golang:1.21 go run main.go
```

## 推荐方案

推荐使用 `goenv`，因为：

1. 它简单易用，类似于 Python 的 `pyenv`
2. 可以轻松地在项目级别设置特定的 Go 版本
3. 不会影响系统其他部分
4. 在项目目录下创建 `.go-version` 文件即可自动切换版本
