"use strict";var Library={};Library.ease=function(){this.target=0,this.position=0,this.move=function(t,e){this.position+=(t-this.position)*e}};var tv={O:[],screen:{},grid:{size:3,borderSize:3,zoomed:!1},angle:{x:new Library.ease,y:new Library.ease},camera:{x:new Library.ease,y:new Library.ease,zoom:new Library.ease,focalLength:800},init:function(){this.screen.obj=document.getElementById("screen");var t=document.getElementById("bankImages").getElementsByTagName("img");this.screen.obj.onselectstart=function(){return!1},this.screen.obj.ondrag=function(){return!1};for(var e=0,i=tv.grid.size/2-.5,o=-i;o<=i;o++)for(var s=-i;s<=i;s++){var n=document.createElement("img"),a=t[e++%t.length];n.className="tvout",n.src=a.src,tv.screen.obj.appendChild(n),n.point3D={x:s,y:o,z:new Library.ease},n.point2D={},n.ratioImage=1,tv.O.push(n),n.onmouseover=function(){tv.grid.zoomed||(tv.o&&(tv.o.point3D.z.target=0,tv.o.className="tvout"),this.className="tvover",this.point3D.z.target=-.5,tv.o=this)},n.onclick=function(){tv.grid.zoomed?this==tv.grid.zoomed&&(tv.camera.x.target=0,tv.camera.y.target=0,tv.camera.zoom.target=tv.screen.w/(tv.grid.size+.1),tv.grid.zoomed=!1):(tv.camera.x.target=this.point3D.x,tv.camera.y.target=this.point3D.y,tv.camera.zoom.target=.9*tv.screen.w,tv.grid.zoomed=this)},n.calc=function(){this.point3D.z.move(this.point3D.z.target,.5);var t=(this.point3D.x-tv.camera.x.position)*tv.camera.zoom.position,e=(this.point3D.y-tv.camera.y.position)*tv.camera.zoom.position,i=this.point3D.z.position*tv.camera.zoom.position,o=tv.angle.cx*e-tv.angle.sx*i,s=tv.angle.sx*e+tv.angle.cx*i,n=tv.angle.cy*s-tv.angle.sy*t,a=tv.angle.sy*s+tv.angle.cy*t;this.point2D.scale=tv.camera.focalLength/(tv.camera.focalLength+n),this.point2D.x=a*this.point2D.scale,this.point2D.y=o*this.point2D.scale,this.point2D.w=Math.round(Math.max(0,this.point2D.scale*tv.camera.zoom.position*.8)),this.ratioImage>1?this.point2D.h=Math.round(this.point2D.w/this.ratioImage):(this.point2D.h=this.point2D.w,this.point2D.w=Math.round(this.point2D.h*this.ratioImage))},n.draw=function(){this.complete&&(this.loaded||(this.img||(this.img=new Image,this.img.src=this.src),this.img.complete&&(this.style.visibility="visible",this.ratioImage=this.img.width/this.img.height,this.loaded=!0,this.img=!1)),this.style.left=Math.round(this.point2D.x*this.point2D.scale+tv.screen.w-.5*this.point2D.w)+"px",this.style.top=Math.round(this.point2D.y*this.point2D.scale+tv.screen.h-.5*this.point2D.h)+"px",this.style.width=this.point2D.w+"px",this.style.height=this.point2D.h+"px",this.style.borderWidth=Math.round(Math.max(this.point2D.w,this.point2D.h)*tv.grid.borderSize*.01)+"px",this.style.zIndex=Math.floor(100*this.point2D.scale))}}tv.resize(),mouse.y=tv.screen.y+tv.screen.h,mouse.x=tv.screen.x+tv.screen.w,tv.run()},resize:function(){var t=tv.screen.obj;for(tv.screen.w=t.offsetWidth/2,tv.screen.h=t.offsetHeight/2,tv.camera.zoom.target=tv.screen.w/(tv.grid.size+.1),tv.screen.x=0,tv.screen.y=0;null!=t;t=t.offsetParent)tv.screen.x+=t.offsetLeft,tv.screen.y+=t.offsetTop},run:function(){tv.angle.x.move(.0025*-(mouse.y-tv.screen.h-tv.screen.y),.1),tv.angle.y.move(.0025*(mouse.x-tv.screen.w-tv.screen.x),.1),tv.camera.x.move(tv.camera.x.target,tv.grid.zoomed?.25:.025),tv.camera.y.move(tv.camera.y.target,tv.grid.zoomed?.25:.025),tv.camera.zoom.move(tv.camera.zoom.target,.05),tv.angle.cx=Math.cos(tv.angle.x.position),tv.angle.sx=Math.sin(tv.angle.x.position),tv.angle.cy=Math.cos(tv.angle.y.position),tv.angle.sy=Math.sin(tv.angle.y.position);for(var t,e=0;t=tv.O[e];e++)t.calc(),t.draw();setTimeout(tv.run,32)}},mouse={x:0,y:0};document.onmousemove=function(t){return window.event&&(t=window.event),mouse.x=t.clientX,mouse.y=t.clientY,!1};